# 线程同步
## 监视器模型
1. 入口区
2. 持有者区(只能从这里退出，即：退出之前一定要获得监视器并执行完)
3. 等待区

- 若有一个线程 A 到达 synchronized(object) {} 处

```
线程 A 进入 入口区

if (没有别的线程在入口区等待)
{
	线程 A 进入持有者区，
	持有该监视器(object)，
	执行同步代码块
}
else if (已经有别的线程在入口区等待)
{
	线程 A 也需要在入口区等待
}
```

当监视器持有者释放监视器时：
```
if (执行完同步代码，没有调用wait())
{
	直接从持有者区退出
	释放监视器
	if (没有调用 notify())
	{
		入口区的线程竞争监视器的所有权
		等待区的线程继续等待
	}
	else if (调用了 notify())
	{
		入口区的线程与等待区的线程一起竞争监视器的所有权
	}
}
else if (调用了wait())
{
	该线程进入等待区
	释放监视器	
	
}
```

